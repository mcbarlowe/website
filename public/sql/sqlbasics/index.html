<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>SQL Basics :: Barlowe Analytics</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Ok if you&amp;rsquo;ve read the first tutorial on installing Postgres and getting your first database up and running, you&amp;rsquo;re now wondering &amp;ldquo;So how do I access all this data?&amp;rdquo; Well that&amp;rsquo;s where this tutorial comes in as we are going to cover some of the basic commands in SQL to get the data we want. Ok let&amp;rsquo;s get started and dive right in to our data.
 Column | Type | Collation | Nullable | Default | Storage | Stats target | Description -----------&#43;------------------&#43;-----------&#43;----------&#43;---------&#43;----------&#43;--------------&#43;------------- yearID | bigint | | | | plain | | teamID | text | | | | extended | | lgID | text | | | | extended | | playerID | text | | | | extended | | G_all | bigint | | | | plain | | GS | double precision | | | | plain | | G_batting | bigint | | | | plain | | G_defense | double precision | | | | plain | | G_p | bigint | | | | plain | | G_c | bigint | | | | plain | | G_1b | bigint | | | | plain | | G_2b | bigint | | | | plain | | G_3b | bigint | | | | plain | | G_ss | bigint | | | | plain | | G_lf | bigint | | | | plain | | G_cf | bigint | | | | plain | | G_rf | bigint | | | | plain | | G_of | bigint | | | | plain | | G_dh | double precision | | | | plain | | G_ph | double precision | | | | plain | | G_pr | double precision | | | | plain | | This table in the database lists the number of appearances at each position for each player, each season and each team." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://barloweanalytics.com/sql/sqlbasics/" />


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-138686262-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


<link rel="stylesheet" href="https://barloweanalytics.com/assets/style.css">

  <link rel="stylesheet" href="https://barloweanalytics.com/assets/pink.css">






<link rel="apple-touch-icon" href="https://barloweanalytics.com/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://barloweanalytics.com/img/favicon/pink.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="barloweanalytic" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="SQL Basics">
<meta property="og:description" content="Ok if you&amp;rsquo;ve read the first tutorial on installing Postgres and getting your first database up and running, you&amp;rsquo;re now wondering &amp;ldquo;So how do I access all this data?&amp;rdquo; Well that&amp;rsquo;s where this tutorial comes in as we are going to cover some of the basic commands in SQL to get the data we want. Ok let&amp;rsquo;s get started and dive right in to our data.
 Column | Type | Collation | Nullable | Default | Storage | Stats target | Description -----------&#43;------------------&#43;-----------&#43;----------&#43;---------&#43;----------&#43;--------------&#43;------------- yearID | bigint | | | | plain | | teamID | text | | | | extended | | lgID | text | | | | extended | | playerID | text | | | | extended | | G_all | bigint | | | | plain | | GS | double precision | | | | plain | | G_batting | bigint | | | | plain | | G_defense | double precision | | | | plain | | G_p | bigint | | | | plain | | G_c | bigint | | | | plain | | G_1b | bigint | | | | plain | | G_2b | bigint | | | | plain | | G_3b | bigint | | | | plain | | G_ss | bigint | | | | plain | | G_lf | bigint | | | | plain | | G_cf | bigint | | | | plain | | G_rf | bigint | | | | plain | | G_of | bigint | | | | plain | | G_dh | double precision | | | | plain | | G_ph | double precision | | | | plain | | G_pr | double precision | | | | plain | | This table in the database lists the number of appearances at each position for each player, each season and each team." />
<meta property="og:url" content="https://barloweanalytics.com/sql/sqlbasics/" />
<meta property="og:site_name" content="Barlowe Analytics" />

  
    <meta property="og:image" content="https://barloweanalytics.com/img/favicon/pink.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2019-05-22 22:16:36 -0400 -0400" />












</head>
<body class="pink">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Barlowe Analytics
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about/aboutme">About</a></li>
        
      
        
          <li><a href="/projects">Projects</a></li>
        
      
        
          <li><a href="/tutorials">Tutorials</a></li>
        
      
        
          <li><a href="/work">Work</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about/aboutme">About</a></li>
      
    
      
        <li><a href="/projects">Projects</a></li>
      
    
      
        <li><a href="/tutorials">Tutorials</a></li>
      
    
      
        <li><a href="/work">Work</a></li>
      
    
    
  </ul>
</nav>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-138686262-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://barloweanalytics.com/sql/sqlbasics/">SQL Basics</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2019-05-22 
      </span>
    
    
  </div>

  

  

  

  <div class="post-content"><div>
        <p>Ok if you&rsquo;ve read the <a href="https://barloweanalytics.com/sql/install/">first tutorial</a> on installing Postgres
and getting your first database up and running, you&rsquo;re now wondering &ldquo;So how do I access all
this data?&rdquo; Well that&rsquo;s where this tutorial comes in as we are going to cover some of the basic
commands in SQL to get the data we want. Ok let&rsquo;s get started and dive right in to our data.</p>
<!-- raw HTML omitted -->
<pre><code>      Column   |       Type       | Collation | Nullable | Default | Storage  | Stats target | Description
    -----------+------------------+-----------+----------+---------+----------+--------------+-------------
     yearID    | bigint           |           |          |         | plain    |              |
     teamID    | text             |           |          |         | extended |              |
     lgID      | text             |           |          |         | extended |              |
     playerID  | text             |           |          |         | extended |              |
     G_all     | bigint           |           |          |         | plain    |              |
     GS        | double precision |           |          |         | plain    |              |
     G_batting | bigint           |           |          |         | plain    |              |
     G_defense | double precision |           |          |         | plain    |              |
     G_p       | bigint           |           |          |         | plain    |              |
     G_c       | bigint           |           |          |         | plain    |              |
     G_1b      | bigint           |           |          |         | plain    |              |
     G_2b      | bigint           |           |          |         | plain    |              |
     G_3b      | bigint           |           |          |         | plain    |              |
     G_ss      | bigint           |           |          |         | plain    |              |
     G_lf      | bigint           |           |          |         | plain    |              |
     G_cf      | bigint           |           |          |         | plain    |              |
     G_rf      | bigint           |           |          |         | plain    |              |
     G_of      | bigint           |           |          |         | plain    |              |
     G_dh      | double precision |           |          |         | plain    |              |
     G_ph      | double precision |           |          |         | plain    |              |
     G_pr      | double precision |           |          |         | plain    |              |
</code></pre><p>This table in the database lists the number of appearances at each position for each player, each season
and each team. G_1b is games at first base and so on. If you need more info about the data
in the database the data dictionary can be found <a href="http://www.seanlahman.com/files/database/readme2012.txt">here</a></p>
<!-- raw HTML omitted -->
<p>Side note here. When I was creating this database file for you I forgot that Postgres only stores column names
in lower case. As you can see above it does recognize upper case when displaying the column. The problem comes
when you want to select a column. If you tried to execute <code>SELECT playerID from appearances limit 10;</code> you would
get an error saying <code>HINT:  Perhaps you meant to reference the column &quot;appearances.playerID&quot;</code>. But even if you added
appearances to your column selection you would still get the same error. THe solution is to add <code>&quot;&quot;</code> around each
column name so that the column is searched for on a case sensitive basis. But that&rsquo;s annoying so lets fix it.</p>
<p>Logout of your current account with <code>\q</code> and log back in with the superuser account that is the same
name as your computer user name and run this code:</p>
<pre><code>\t on
select 'ALTER TABLE '||'&quot;'||table_name||'&quot;'||' RENAME COLUMN '||'&quot;'||column_name||'&quot;'||' TO ' || lower(column_name)||';'
from information_schema.columns
where table_schema = 'public' and lower(column_name) != column_name
\g /tmp/go_to_lower
\i /tmp/go_to_lower
</code></pre>
<p>Copy this and paste it into the terminal and hit enter and all your column names will be in lower case. I put this
in the tutorial for a very good reason. I could have gone back and fixed the file and changed a couple
things and made it look like I&rsquo;m perfect, but I&rsquo;m not. Mistakes happen. A lot. Things are going
break and a vital skill is to learn how to fix them. In this case I literally googled
&lsquo;convert all columnames to lowercase postgres&rsquo; and the answer was the <a href="https://stackoverflow.com/questions/10086532/how-can-i-convert-all-columns-in-my-database-to-case-insensitive">second link</a>
on google.</p>
<p>Do I know exactly what that code does? Nope but what better place to learn than in a situation
with no ramifications for it being wrong. Now knowing what to google comes with experience,
but a good place to start is to just cut and paste the error into google and start clicking.
This is what every professional programmer does and the ones that say they don&rsquo;t are lying.
Ok back to the tutorial.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>playerid  | teamid | g_1b | g_2b | g_cf
-----------+--------+------+------+------
 abercda01 | TRO    |    0 |    0 |    0
 addybo01  | RC1    |    0 |   22 |    0
 allisar01 | CL1    |    0 |    2 |   29
 allisdo01 | WS3    |    0 |    0 |    0
 ansonca01 | RC1    |    1 |    2 |    0
 armstbo01 | FW1    |    0 |    0 |   11
 barkeal01 | RC1    |    0 |    0 |    0
 barnero01 | BS1    |    0 |   16 |    0
 barrebi01 | FW1    |    0 |    0 |    0
 barrofr01 | BS1    |    0 |    1 |    0
(10 rows)
</code></pre>
<!-- raw HTML omitted -->
<pre><code>SELECT playerid, teamid, g_1b, g_2b, g_cf from appearances WHERE yearid = 2016 limit 10;
</code></pre>
<!-- raw HTML omitted -->
<pre><code> yearid | playerid  | teamid | g_1b | g_2b | g_cf
--------+-----------+--------+------+------+------
   2016 | abadfe01  | BOS    |    0 |    0 |    0
   2016 | abadfe01  | MIN    |    0 |    0 |    0
   2016 | abreujo02 | CHA    |  152 |    0 |    0
   2016 | achteaj01 | LAA    |    0 |    0 |    0
   2016 | ackledu01 | NYA    |   13 |    1 |    0
   2016 | adamecr01 | COL    |    0 |   11 |    0
   2016 | adamsau01 | CLE    |    0 |    0 |    0
   2016 | adamsma01 | SLN    |   86 |    0 |    0
   2016 | adlemti01 | CIN    |    0 |    0 |    0
   2016 | adriaeh01 | SFN    |    0 |    7 |    0
(10 rows)
</code></pre>
<p>This has returned all the players that had an appearance in the 2016 baseball season.
You can also chain these commands as well using logical switches such as AND or OR like so:</p>
<pre><code>SELECT playerid, teamid, g_1b, g_2b, g_cf from appearances WHERE yearid = 2016 AND g_1b &gt; 100;
</code></pre>
<!-- raw HTML omitted -->
<pre><code>SELECT playerid, sum(h) FROM batting WHERE yearid=2017 GROUP BY playerid ORDER BY sum(h) DESC LIMIT 10;
</code></pre>
<p>Which gives us this output:</p>
<pre><code> playerid  | sum
-----------+-----
 blackch02 | 213
 altuvjo01 | 204
 inciaen01 | 201
 gordode01 | 201
 hosmeer01 | 192
 ozunama01 | 191
 andruel01 | 191
 abreujo02 | 189
 lemahdj01 | 189
 arenano01 | 187
</code></pre>
<!-- raw HTML omitted -->
<pre><code>SELECT playerid, sum(h) AS Hits FROM batting WHERE yearid=2017 GROUP BY playerid ORDER BY sum(h) DESC LIMIT 10;
</code></pre>
<!-- raw HTML omitted -->
<pre><code> playerid  | hits
-----------+------
 blackch02 |  213
 altuvjo01 |  204
 inciaen01 |  201
 gordode01 |  201
 hosmeer01 |  192
 ozunama01 |  191
 andruel01 |  191
 abreujo02 |  189
 lemahdj01 |  189
 arenano01 |  187
(10 rows)
</code></pre>
<!-- raw HTML omitted -->
<p>A couple other notes on this query. We have to do the <code>GROUP BY</code> because this table has a row for each player for each team
they played for in the season. A lot of players do play for the same team all season but a lot don&rsquo;t. If you didn&rsquo;t do
the group by you would miss out on those other team hits for that player. The next is the <code>ORDER BY</code> this tells
the database how to sort the results in this case by hits descending, i.e. from largest to smallest, with the
<code>DESC</code> keyword. When you alias the <code>sum(h)</code> column you can just using <code>ORDER BY hits</code> next time. <code>ORDER BY</code> will
sort ascending by default unless you tell it otherwise</p>
<!-- raw HTML omitted -->
<p>Our next tutorial will cover <code>JOIN</code> so you can finall tell which players are actually accumulating the stats
you are calculating in you queries.</p>
<!-- raw HTML omitted -->

      </div></div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>2019 Barlowe Analytics</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://barloweanalytics.com/assets/main.js"></script>
<script src="https://barloweanalytics.com/assets/prism.js"></script>







  
</div>

</body>
</html>
